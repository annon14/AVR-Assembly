;
; Chapter11.asm
;
; Created: 5/22/2017 11:16:43 PM
; Author : Saeid
; TO PROGRAM THE ATMEGA32 TO 
; RECIVE BYTES OF DATA SERIALLY AND PUT THEM ON PORTB. 
; SET THE BAUD RATE AT 9600, 8BIT DATA, AND 1 STOP BIT.

.INCLUDE "M32DEF.INC"
			LDI		R16 , 	(1<<RXEN)
			OUT	UCSRB	, R16
			LDI		R16 ,  (1<<UCSZ1) | (1<<UCSZ2) | (1<<URSEL)
			OUT	UCSRC	, R16
			LDI		R16 , 0x33
			OUT	UBRRL  , R16
			LDI		R16 , 0xFF 
			OUT	DDRB , R16
RCVE :
			SBIS	UCSRA , RXC
			RJMP		RCVE
			IN		R17 , UDR
			OUT	PORTB , R17 
			RJMP		RCVE
